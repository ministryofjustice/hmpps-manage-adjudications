{% extends "../../partials/layout.njk" %}
{% from "../../partials/breadCrumb.njk" import breadcrumb %}
{% from "../../macros/dataInsights/dataInsightsTabHeaderSingular.njk" import dataInsightsTabHeaderSingular %}
{% from "../../macros/dataInsights/officialSensitiveBanner.njk" import officialSensitiveBanner %}
{% from "../../macros/dataInsights/giveFeedbackBanner.njk" import giveFeedbackBanner %}
{% from "../../partials/charts/horizontalBarsChartWithSelect.njk" import horizontalBarsChartWithSelect %}
{% from "../../partials/charts/linesChart.njk" import linesChart %}
{%- from "moj/components/alert/macro.njk" import mojAlert -%}

{% set title = "Adjudication data - Offence type" %}

{% block pageTitle %}
  {{ title }} - Adjudications - Digital Prison Services
{% endblock %}

{% block beforeContent %}
  {{ giveFeedbackBanner() }}

  {{ breadcrumb() }}

{{ mojAlert({
  variant: "information",
  title: "Minor changes to previous data",
  showTitleAsHeading: true,
  dismissible: false,
  html: 'Following a change in March 2025, you may notice small changes to past figures on this page. This is due to work to improve how data sources, like NOMIS and OASys, are linked. Previous figures will not change again.'
}) }}

{% endblock %}

{% block content %}

  <div class="offence-type-tab">

    {{ dataInsightsTabHeaderSingular(tabsOptions) }}

    <div class="govuk-!-margin-bottom-6">
        <p class="govuk-body" data-qa="last-da">Data source: NOMIS <br/>
        Date updated: {{ lastModifiedDate }}
        </p>
    </div>

    <div class="govuk-!-margin-bottom-6">
      {{ linesChart(chartSettingMap['3a']) }}
    </div>

    <div class="govuk-!-margin-bottom-6">
      {{ horizontalBarsChartWithSelect(chartSettingMap['3b'], allSelectorSettings['offenceType'], allSelectorParams, csrfToken) }}
    </div>

    <div class="govuk-!-margin-bottom-6 govuk-!-margin-top-8">
      {{ officialSensitiveBanner() }}
    </div>

  </div>

{% endblock %}

{% block pageScripts %}
  <script type="text/javascript" src="/assets/js/chart.umd.js"></script>
  <script type="text/javascript" src="/assets/js/displayChart.js"></script>
  <script id="chart-settings" type="text/javascript" src="/assets/js/loadChart.js"
          data-chart-settings="{{ chartSettingMap | dump }}"></script>
{% endblock %}
