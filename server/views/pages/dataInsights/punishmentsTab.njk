{% extends "../../partials/layout.njk" %}
{% from "../../partials/breadCrumb.njk" import breadcrumb %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../../macros/dataInsights/dataInsightsTabHeaderSingular.njk" import dataInsightsTabHeaderSingular %}
{% from "../../partials/charts/linesChart.njk" import linesChart %}
{% from "../../partials/charts/multiVerticalBarsChart.njk" import multiVerticalBarsChart %}

{% set title = "Adjudication data - Punishments" %}

{% block pageTitle %}
  {{ title }}
{% endblock %}

{% block beforeContent %}
  {{ breadcrumb() }}
{% endblock %}

{% block content %}

  <div class="punishments-tab">

    {{ dataInsightsTabHeaderSingular(tabsOptions) }}

    <div class="govuk-!-margin-bottom-6">
      {{ linesChart(chartSettingMap['4a']) }}
    </div>

    <div>
      <form method="POST" novalidate="novalidate" class="govuk-!-margin-top-5">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}"/>

        <div class="flex-container">
          {{ govukSelect({
            id: 'offenceType',
            name: 'offenceType',
            label: {
              text: 'Select offence type',
              isPageHeading: false,
              classes: ''
            },
            items: offenceTypes | toSelect('value', 'text', offenceType),
            classes: 'flex-column filter-selector',
            errorMessage: 'offenceType' | findError(errors)
          }) }}

          {{ govukButton({
            text: 'Show results',
            type: 'submit',
            preventDoubleClick: true,
            classes: 'govuk-button--submit govuk-!-margin-right-3 flex-column show-results-button',
            attributes: { 'data-qa': 'not-proceed-submit' }
          }) }}
        </div>

      </form>
    </div>

    <div class="govuk-!-margin-bottom-6">
      {{ linesChart(chartSettingMap['4b']) }}
    </div>

    <div class="govuk-!-margin-bottom-6">
      {{ multiVerticalBarsChart(chartSettingMap['4c']) }}
    </div>

  </div>

{% endblock %}

{% block pageScripts %}
  <script type="text/javascript" src="/assets/js/chart.umd.js"></script>
  <script type="text/javascript" src="/assets/js/displayChart.js"></script>
  <script id="chart-settings" type="text/javascript" src="/assets/js/loadChart.js"
          data-chart-settings="{{ chartSettingMap | dump }}"></script>
{% endblock %}