{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% macro prisonerSearchOffenceCodeDecisionInput(selectedDecisionId, questionId, userId, prisonerName, userSearchInput, errors) %}
    {% if selectedDecisionId == questionId and userId != null %}
        <input type="hidden" name="userId{{ questionId }}" value="{{ userId }}" />
        <div>
            <p><span class="govuk-!-font-weight-bold">Name</span> - {{ prisonerName }} </p>
            <p><span class="govuk-!-font-weight-bold">PRN</span> - {{ userId }} </p>
            <div>
                {{ govukButton({
                    text: 'Delete',
                    classes: "govuk-button--secondary",
                    type: "submit",
                    name: "deleteUser",
                    value: "deleteUser"
                }) }}
            </div>
        </div>
    {% else %}
        <div class="flex-container flex-center">
            <div class="govuk-!-margin-right-3">
                {{ govukInput({
                    id: "userSearchInput" + questionId,
                    name: "userSearchInput" + questionId,
                    classes: "govuk-!-width-full-width",
                    value: selectedDecisionId == questionId and userSearchInput,
                    errorMessage: errors | findErrors(['userSearchInput' + questionId]),
                    label: {
                        text: "Enter their name or prison number",
                        classes: "govuk-!-font-weight-bold"
                    }
                }) }}
            </div>
            {{ govukButton({
                text: "Search",
                classes: "govuk-button--secondary conditionalRadioSearchButton",
                type: "submit",
                name: "searchUser",
                value: "searchUser"
            }) }}
        </div>
    {% endif %}

{% endmacro %}